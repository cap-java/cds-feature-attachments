/*
 * Â© 2024 SAP SE or an SAP affiliate company. All rights reserved.
 */
package com.sap.cds.feature.attachments.integrationtests.draftservice;

import static org.assertj.core.api.Assertions.assertThat;

import java.io.IOException;
import java.io.InputStream;
import java.nio.charset.StandardCharsets;
import java.util.Objects;

import org.junit.jupiter.api.Test;
import org.springframework.test.context.ActiveProfiles;

import com.sap.cds.feature.attachments.integrationtests.constants.Profiles;

@ActiveProfiles(Profiles.TEST_HANDLER_DISABLED)
class DraftOdataRequestValidationWithoutTestHandlerAndWithoutMalwareScannerTest extends DraftOdataRequestValidationBase {

	@Test
	void serviceHandlerIsNull() {
		assertThat(serviceHandler).isNull();
	}

	@Override
	protected void verifyContentId(String contentId, String attachmentId) {
		assertThat(contentId).isEqualTo(attachmentId);
	}

	@Override
	protected void verifyContent(InputStream attachment, String testContent) throws IOException {
		if (Objects.nonNull(testContent)) {
			assertThat(attachment.readAllBytes()).isEqualTo(testContent.getBytes(StandardCharsets.UTF_8));
		} else {
			assertThat(attachment).isNull();
		}
	}

	@Override
	protected void verifyNoAttachmentEventsCalled() {
		//	no service handler - nothing to do
	}

	@Override
	protected void clearServiceHandlerContext() {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyEventContextEmptyForEvent(String... events) {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyOnlyTwoCreateEvents(String newAttachmentContent, String newAttachmentEntityContent) {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyTwoCreateAndDeleteEvents(String newAttachmentContent, String newAttachmentEntityContent) {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyTwoReadEvents() {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyOnlyTwoDeleteEvents(String attachmentContentId, String attachmentEntityContentId) {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyTwoUpdateEvents(String newAttachmentContent, String attachmentContentId,
			String newAttachmentEntityContent, String attachmentEntityContentId) {
		//	no service handler - nothing to do
	}

	@Override
	protected void verifyTwoCreateAndRevertedDeleteEvents() {
		//	no service handler - nothing to do
	}

}
